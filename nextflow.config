
// Parameters
params {
    // Required params - defaults to testing data
    // HACK THE DIRECTORIES HAVE TO BE ABSOLUTE ONES
    outdir = "$projectDir/test_data/model_build_out"
    assemblypath = "$projectDir/test_data/model_build_in"
    hostdata = "$projectDir/test_data/model_build_in/metadata.csv"

    // Metadata column names
    assembly_column="Filename"
    host_column="Source.Host"
    region_column="Region"
    year_collected="Year"

    // Clonal cluster cheking params
    check_clonal=true // placeholder - doesnt currently do anything
    snp_dist_threshold=10

    // Assembly quality thresholds
    as_ln_upr = 6000000
    as_ln_lwr = 4000000
    ctg_count = 500
    largest_ctg = 100000
    n50 = 50000
    gc_upr = 54
    gc_lwr = 50

    // Computing parameters
    // TODO The multithreading r package fails so model_threads is a placeholder
    threads = 10 
    model_threads=5

    // Prokka reference file
    prokka_ref = "$projectDir/data/stm_proteinref.fasta"

    // AMRfinder parameters
    amr_species = 'Salmonella'

    // Panaroo parameters
    panaroo_mode = 'moderate'

    // Snippy parameters
    snp_ref = "$projectDir/data/stm_sl1344.fasta"

    // Other DO NOT CHANGE
    fileextension = "fasta"
    scoarycutoff = 1.1
    
    help = false
}
// TODO add tool-specific options like options = "-evalue 1e-3"

profiles {

  docker {
    includeConfig 'configs/docker.config'
  }

  singularity {
  	includeConfig 'configs/singularity.config'
  }

}

// Reporting
timeline {
  enabled = true
  file = "${params.outdir}/timeline.html"
}
report {
  enabled = true
  file = "${params.outdir}/report.html"
}
trace {
  enabled = true
  file = "${params.outdir}/trace.txt"
}
dag {
  enabled = true
  file = "${params.outdir}/DAG.svg"
}

manifest {
name = 'sTM Host Attribution - Model Building'
author = 'Antonia Chalka'
homePage = 'https://github.com/Antonia-Chalka/stm_ml_pipeline'
description = 'A pipeline to create host attribution random forest models based on SNPs, PVs, IGRs & AMR Profiles from a set of assemblies.'
mainScript = 'pipeline_dsl2.nf'
nextflowVersion = '21.10+'
version = '1.0.0'
}
